<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" href="font_c1llq0x9uor/iconfont.css">
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}

			ul {
				list-style: none;
				display: flex;
				flex-flow: nowrap;
				justify-content: space-around;
			}

			li {
				position: relative;
			}

			.a {
				position: absolute;
				font-size: 25px;
				bottom: 0;
				right: 0;
			}

			.en {
				color: #f08c29;
			}

			li:hover p,
			li:hover a,
			li:hover span {
				color: #00FFFF;
			}

			.ae li {
				margin-top: 20px;
				display: flex;
				flex-direction: column;
				align-items: center;
			}

			.ae span {
				font-size: 40px;
			}

			a {
				text-decoration: none;
				color: inherit;
			}

			#en {
				color: #00FFFF;
			}
		</style>
	</head>
	<body>
		<div>
			<ul>
				<li><img src="../../../images/2.jpg">
					<p class="an">玫瑰花葡萄新鲜水果...</p>
					<p class="en">￥80.00</p><span class="a iconfont icon-tianjia"></span>
				</li>
				<li><img src="../../../images/3.jpg">
					<p class="an">玫瑰花葡萄新鲜水果...</p>
					<p class="en">￥90.00</p><span class="a iconfont icon-tianjia"></span>
				</li>
				<li><img src="../../../images/4.jpg">
					<p class="an">玫瑰花葡萄新鲜水果...</p>
					<p class="en">￥110.00</p><span class="a iconfont icon-tianjia"></span>
				</li>
				<li><img src="../../../images/5.jpg">
					<p class="an">玫瑰花葡萄新鲜水果...</p>
					<p class="en">￥120.00</p><span class="a iconfont icon-tianjia"></span>
				</li>
			</ul>
		</div>
		<div class="ae">
			<ul>
				<li><a href="shop.html"><span class="iconfont icon-shouye" id="en"></span></a><a id="en" href="shop.html">首页</a></li>
				<li><a href="Shopping Cart.html"><span class="iconfont icon-gouwuche"></span></a><a href="Shopping Cart.html">购物车</a></li>
				<li><span class="iconfont icon-gouwuche"></span>
					<p>我的</p>
				</li>
			</ul>
		</div>
		<script type="text/javascript">
			var img = document.getElementsByTagName("img")
			var an = document.getElementsByClassName("an")
			var en = document.getElementsByClassName("en")
			var span = document.getElementsByClassName("a")
			var arr = []
			for (var i = 0; i < span.length; i++) {
				span[i].index = i //记下标
				span[i].onclick = function() {
					if (localStorage.getItem("shop") != null) {
						arr = JSON.parse(localStorage.getItem("shop")) //把json字符串转换成对应的数组或对象
					}
					var shop = {
						img: img[this.index].src,
						name: an[this.index].innerHTML,
						price: en[this.index].innerHTML,
						num: 1
					}
					console.log(img)
					var bool = arr.some(function(v, i) {
						console.log(v)
						return v.price == shop.price
					})

					if (bool) {
						var res = arr.findIndex(function(n, i) {
							return n.price == shop.price
						})
						arr[res].num++
					} else {
						arr.push(shop)
					}
					//把数据存入数组
					console.log(shop)
					// console.log(JSON.stringify(shop))
					localStorage.setItem("shop", JSON.stringify(arr)) //放入本地存储
					console.log(localStorage.getItem("shop"))
					// JSON.parse() 把json字符串转换成对应的数组或对象
					// JSON.stringify() 把数组或对象转换成对应的json字符串
				}
				arr = []
			}
		</script>
	</body>
</html>
